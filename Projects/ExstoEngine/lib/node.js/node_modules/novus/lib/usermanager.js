var io = require('socket.io');

exports.bind = function(socket) {
	socket.on('login', function(data) {
		addUser(data.username, socket);
	});
};

exports.getUser = function(conn) {
	var i = 0,
		ln = users.length;
	for(; i < ln; i++) {
		if(users[i].conn == conn) {
			return users[i].username;
		}
	}
};

var users = [];

function addUser(username, conn) {
	users.push(new User(username, conn));
	console.log('User joined: ' + username);
};

function User(username, conn) {
	this.username = username;
	this.conn = conn;
};