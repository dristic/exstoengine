exports = {
	_urls: {},
	_callbacks: {},
	_queue: [],
	_date: new Date(),
	
	asyncFile: function (url, callback) {
		if(typeof this._urls[url] != 'undefined') {
			return;
		}
		
		// Add url to list
		this._urls[url] = false;
		
		// Add callback to the list
		if(typeof callback != "undefined") {
			this._callbacks[url] = callback;
		}
		
		this._queue.push(url + "? ex=" + this._date.getTime());
	},
	
	startQueue: function () {
		for(var i = 0; i < this._queue.length; i++) {
			var url = this._queue[i];
			
			// Use require and call on loaded
			require(url);
			ex.Loader.onScriptLoad(url);
		}
		
		this._queue = [];
	},
	
	onScriptLoad: function (url) {
		// Set url loaded to true
		this._urls[url] = true;
		
		// Call and delete callback
		if(url in this._callbacks) {
			this._callbacks[url]();
			delete this._callbacks[url];
		}
	}
};